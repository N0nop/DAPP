{"ast":null,"code":"var _jsxFileName = \"/home/leixiao/DAPP/src/Navi/Navi.js\";\nimport { Layout, Menu, Breadcrumb, Icon } from 'antd';\nimport React, { Component } from 'react';\nimport 'antd/dist/antd.css';\nimport logo from \"../logo.svg\";\nimport './Navi.css';\nimport { Button } from 'antd';\nimport { Input } from 'antd';\nimport { Collapse } from 'antd';\nimport Web3 from \"web3\";\nlet web3 = window.web3;\nconst Header = Layout.Header,\n      Content = Layout.Content,\n      Footer = Layout.Footer,\n      Sider = Layout.Sider;\nconst TextArea = Input.TextArea,\n      Search = Input.Search;\nconst Panel = Collapse.Panel;\nconst SubMenu = Menu.SubMenu; // For test\n\nconst onChange = e => {\n  console.log(e);\n};\n\nconst CONTRACT = \"0xD1D8494820A809F94Def324FEF631Ca2bBB37345\";\n\nclass SiderDemo extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      collapsed: false,\n      mode: 'inline',\n      loading: false,\n      iconLoading: false,\n      showstate: false,\n      content: \"\",\n      account: \"\"\n    };\n    this.notes = {\n      length: 0,\n      idx: 0,\n      items: [] // The notes' contents\n      // Format:\n      // {content : \"content\" , idx: \"123\", title: \"title\"}\n\n    };\n    this.other_notes = {\n      length: 0,\n      idx: 0,\n      items: [] // The notes' contents\n      // Format:\n      // {content : \"content\" , idx: \"123\", title: \"title\"}\n\n    };\n    this.edit_idx = -1;\n\n    this.GetLength = async (account, my) => {\n      // Call the function Length in smart contract\n      try {\n        const payload = web3.eth.abi.encodeFunctionCall({\n          name: \"Length\",\n          type: \"function\",\n          inputs: [{\n            type: 'address',\n            name: '_address'\n          }]\n        }, [account]);\n        const res = await web3.eth.call({\n          to: CONTRACT,\n          data: payload\n        }); // Argument \"my\" is used to decide change the \"length\" of the account owner or others\n\n        if (my == 1) {\n          this.notes[\"length\"] = web3.eth.abi.decodeParameter(\"uint256\", res);\n        } else {\n          this.other_notes[\"length\"] = web3.eth.abi.decodeParameter(\"uint256\", res);\n        }\n      } catch (e) {\n        // If there is error, same as below\n        console.error(e.message);\n      }\n    };\n\n    this.WriteNote = async content => {\n      // Call the function Write in smart contract\n      const funcSig = web3.eth.abi.encodeFunctionSignature(\"Write(address,string)\");\n      const param = web3.eth.abi.encodeParameters(['address', 'string'], [web3.eth.defaultAccount, content]);\n\n      try {\n        await web3.eth.sendTransaction({\n          to: CONTRACT,\n          data: funcSig + param.slice(2),\n          gas: 2000000\n        });\n        alert(\"Write done.\");\n      } catch (e) {\n        console.error(e.message);\n      } finally {\n        // Update the length in state after writing down (maybe fail, thus length won't change)\n        this.GetLength(web3.eth.defaultAccount, this.notes);\n      }\n    };\n\n    this.ModifyNote = async content => {\n      // Call the funcion Modify in smart contract\n      const funcSig = web3.eth.abi.encodeFunctionSignature(\"Modify(address,uint256,string)\");\n      const param = web3.eth.abi.encodeParameters(['address', 'uint256', 'string'], [web3.eth.defaultAccount, this.edit_idx, content]);\n\n      try {\n        await web3.eth.sendTransaction({\n          to: CONTRACT,\n          data: funcSig + param.slice(2),\n          gas: 2000000\n        });\n        alert(\"Modify done.\");\n      } catch (e) {\n        console.error(e.message);\n      } finally {\n        // Update the length\n        this.GetLength(web3.eth.defaultAccount, this.notes);\n      }\n    };\n\n    this.Read = async (account, my) => {\n      this.setState({\n        loading: true\n      });\n      var i = 0;\n      var length = 0; // The function of argument \"my\" is same as mentioned before\n      // Note that has been read before won't be read twice (unless fresh or change the page)\n\n      if (my == 1) {\n        i = this.notes[\"idx\"];\n        length = this.notes[\"length\"];\n      } else {\n        i = this.other_notes[\"idx\"];\n        length = this.other_notes[\"length\"];\n      }\n\n      try {\n        for (; i < length; i++) {\n          // Call the function Read in smart contract\n          const payload = web3.eth.abi.encodeFunctionCall({\n            name: \"Read\",\n            type: \"function\",\n            inputs: [{\n              type: 'address',\n              name: '_address'\n            }, {\n              type: 'uint256',\n              name: 'index'\n            }]\n          }, [account, i]);\n          const res = await web3.eth.call({\n            to: CONTRACT,\n            data: payload\n          });\n          this.setState({\n            content: web3.eth.abi.decodeParameter(\"string\", res) // idx:i+1\n\n          }); // Same as above\n\n          if (my == 1) {\n            this.notes[\"idx\"] = i + 1;\n            this.notes[\"items\"].push({\n              'content': this.state.content.substr(this.state.content.indexOf(\"\\n\\n\") + 2),\n              'idx': i.toString(),\n              'title': this.state.content.substr(0, this.state.content.indexOf(\"\\n\\n\"))\n            });\n          } else {\n            this.other_notes[\"idx\"] = i + 1;\n            this.other_notes[\"items\"].push({\n              'content': this.state.content.substr(this.state.content.indexOf(\"\\n\\n\") + 2),\n              'idx': i.toString(),\n              'title': this.state.content.substr(0, this.state.content.indexOf(\"\\n\\n\"))\n            });\n          } // Update the page after read successfully\n\n\n          this.changeShowState2true();\n        }\n      } catch (e) {\n        console.error(e.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n\n    this.toggle = () => {\n      this.setState({\n        collapsed: !this.state.collapsed\n      });\n    };\n\n    this.enterLoading = () => {\n      this.setState({\n        loading: true\n      });\n    };\n\n    this.enterIconLoading = () => {\n      this.setState({\n        iconLoading: true\n      });\n    };\n\n    this.enterIconLoading = () => {\n      this.setState({\n        nno: true\n      });\n    };\n\n    this.setAccount = account => {\n      this.setState({\n        account: account\n      }); // web3.eth.defaultAccount = this.state.account;\n    };\n\n    this.Func_MyNotes = () => {\n      if (this.state.loading == true) return;\n      this.displayAndHiddenBtn(\"shownotes\", \"d\");\n      this.displayAndHiddenBtn(\"upload_div\", \"h\");\n      this.displayAndHiddenBtn(\"search_input\", \"h\");\n      this.displayAndHiddenBtn(\"show_other_notes\", \"h\");\n      this.displayAndHiddenBtn(\"edit_div\", \"h\");\n    };\n\n    this.Func_NewNote = () => {\n      if (this.state.loading == true) return;\n      this.displayAndHiddenBtn(\"shownotes\", \"h\");\n      this.displayAndHiddenBtn(\"upload_div\", \"d\");\n      this.displayAndHiddenBtn(\"search_input\", \"h\");\n      this.displayAndHiddenBtn(\"show_other_notes\", \"h\");\n      this.displayAndHiddenBtn(\"edit_div\", \"h\");\n    };\n\n    this.Func_FindNote = () => {\n      if (this.state.loading == true) return;\n      this.displayAndHiddenBtn(\"shownotes\", \"h\");\n      this.displayAndHiddenBtn(\"upload_div\", \"h\");\n      this.displayAndHiddenBtn(\"search_input\", \"d\");\n      this.displayAndHiddenBtn(\"show_other_notes\", \"h\");\n      this.displayAndHiddenBtn(\"edit_div\", \"h\");\n    };\n\n    this.EmptyOtherNotes = () => {\n      this.other_notes[\"length\"] = 0;\n      this.other_notes[\"idx\"] = 0;\n      this.other_notes[\"items\"] = [];\n    };\n\n    this.Func_SearchOtherNote = async account => {\n      try {\n        this.EmptyOtherNotes();\n        await this.GetLength(account, 0);\n        this.Read(account, 0);\n        this.displayAndHiddenBtn(\"shownotes\", \"h\");\n        this.displayAndHiddenBtn(\"upload_div\", \"h\");\n        this.displayAndHiddenBtn(\"search_input\", \"d\");\n        this.displayAndHiddenBtn(\"show_other_notes\", \"d\");\n        this.displayAndHiddenBtn(\"edit_div\", \"h\");\n        document.getElementById(\"other_navigation\").innerText = \"Results:\";\n      } catch (e) {\n        console.error(e.message);\n        alert(\"Not found\");\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n\n    this.Func_EditNote = () => {\n      if (this.state.loading == true) return;\n      this.displayAndHiddenBtn(\"shownotes\", \"h\");\n      this.displayAndHiddenBtn(\"upload_div\", \"h\");\n      this.displayAndHiddenBtn(\"search_input\", \"h\");\n      this.displayAndHiddenBtn(\"show_other_notes\", \"h\");\n      this.displayAndHiddenBtn(\"edit_div\", \"d\");\n    };\n\n    this.Func_doUpload = async (title, content) => {\n      var tmp;\n      tmp = title + \"\\n\\n\" + content;\n      await this.WriteNote(tmp);\n      window.location.reload(true);\n    };\n\n    this.Func_doSearch = title => {\n      var i = 0;\n      var content, title;\n      var find = 0;\n\n      for (i = 0; i < this.notes[\"length\"]; ++i) {\n        if (this.notes[\"items\"][i][\"title\"] === title) {\n          content = this.notes[\"items\"][i][\"content\"];\n          title = this.notes[\"items\"][i][\"title\"];\n          document.getElementById(\"edit_content\").value = content;\n          document.getElementById(\"edit_title\").value = title;\n          this.edit_idx = i;\n          find = 1;\n          break;\n        }\n      }\n\n      if (find == 0) {\n        alert(\"Not found\");\n      }\n    };\n\n    this.Func_doEdit = async (title, content) => {\n      if (this.edit_idx == -1) {\n        alert(\"Modify error, you must get the note you want to modify first!\");\n        return;\n      }\n\n      var tmp;\n      tmp = title + \"\\n\\n\" + content;\n      await this.ModifyNote(tmp);\n      this.edit_idx = -1;\n      window.location.reload(true);\n    };\n\n    this.displayAndHiddenBtn = (btnId, type) => {\n      var currentBtn = document.getElementById(btnId);\n\n      if (type == \"d\") {\n        currentBtn.style.display = \"block\"; //style中的display属性\n      } else if (type == \"h\") {\n        currentBtn.style.display = \"none\";\n      } // add by me\n\n\n      document.getElementById(\"main_div\").style.height = document.body.height - document.getElementById(\"footer\").style.height;\n    };\n  }\n\n  // Get account from metamask or set by default\n  componentWillMount() {\n    window.addEventListener(\"load\", async () => {\n      if (window.ethereum) {\n        // console.log(\"init metamask\", window.ethereum);\n        web3 = new Web3(window.ethereum);\n        await window.ethereum.enable();\n        await web3.eth.getAccounts(function (err, accounts) {\n          web3.eth.defaultAccount = accounts[0];\n        });\n      } else {\n        console.log(\"inject sdk\");\n        web3 = new Web3(new Web3.providers.HttpProvider(\"http://localhost:7545\")); // 添加Ganache第一个账户的私钥\n\n        web3.eth.accounts.wallet.add(\"0x9d3908699ff0fff75d409fc5bac0ea322cc6287c47299959ee291aef6cfe67a4\");\n        web3.eth.defaultAccount = \"0x819De97b7B694941D4F82a9C9B4af544109407F9\";\n      } // Get the number of notes at the very beginning, use the \"await\" to make sure that read can be successful after get the right length\n\n\n      await this.GetLength(web3.eth.defaultAccount, 1); // Read all notes for displaying\n\n      this.Read(web3.eth.defaultAccount, 1);\n    });\n  } // Call the smart contract to get the number of notes in total\n\n\n  changeShowState2true() {\n    this.setState(state => {\n      return {\n        showstate: true\n      };\n    });\n  } // Those Func_MyNotes, Func_NewNote, Func_FindNote, Func_SearchOtherNote are all binded to click button for page switching\n\n\n  render() {\n    const name = this.state.name;\n    return React.createElement(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, React.createElement(Sider, {\n      trigger: null,\n      collapsible: true,\n      collapsed: this.state.collapsed,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"nav-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    })), React.createElement(Menu, {\n      theme: \"dark\",\n      mode: \"inline\",\n      defaultSelectedKeys: ['1'],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, React.createElement(Menu.Item, {\n      key: \"1\",\n      onClick: () => {\n        this.Func_MyNotes();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"nav-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396\n      },\n      __self: this\n    }, \"My Notes\")), React.createElement(SubMenu, {\n      key: \"sub1\",\n      title: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        type: \"mail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403\n        },\n        __self: this\n      }, \"New / Edit\")),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398\n      },\n      __self: this\n    }, React.createElement(Menu.Item, {\n      key: \"2\",\n      onClick: () => {\n        this.Func_NewNote();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"nav-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409\n      },\n      __self: this\n    }, \"New note\")), React.createElement(Menu.Item, {\n      key: \"3\",\n      onClick: () => {\n        this.Func_EditNote();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"nav-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413\n      },\n      __self: this\n    }, \"Edit note\"))), React.createElement(Menu.Item, {\n      key: \"4\",\n      onClick: () => {\n        this.Func_FindNote();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"right-circle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"nav-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418\n      },\n      __self: this\n    }, \"Find notes\")))), React.createElement(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423\n      },\n      __self: this\n    }, React.createElement(Header, {\n      style: {\n        background: '#000',\n        padding: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        color: '#fff',\n        paddingLeft: '2%',\n        fontSize: '1.4em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      className: \"trigger\",\n      type: this.state.collapsed ? 'menu-unfold' : 'menu-fold',\n      onClick: this.toggle,\n      style: {\n        cursor: 'pointer'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      style: {\n        color: '#fff',\n        paddingLeft: '2%',\n        fontSize: '1.4em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433\n      },\n      __self: this\n    }, \"Dapp Note\"), React.createElement(\"span\", {\n      style: {\n        color: '#fff',\n        float: 'right',\n        paddingRight: '1%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      className: \"App-logo\",\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435\n      },\n      __self: this\n    }))), React.createElement(Content, {\n      style: {\n        margin: '0 160px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"main_div\",\n      style: {\n        padding: 24,\n        background: '',\n        minHeight: document.body.clientHeight\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441\n      },\n      __self: this\n    }, React.createElement(Breadcrumb, {\n      style: {\n        margin: '20px 0'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"shownotes\",\n      style: {\n        display: 'block'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      id: \"my_navigation\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444\n      },\n      __self: this\n    }, \"My Notes:\"), React.createElement(Collapse, {\n      accordion: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445\n      },\n      __self: this\n    }, this.notes[\"items\"].map(note => {\n      return React.createElement(Panel, {\n        header: note.title,\n        key: note.idx,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449\n        },\n        __self: this\n      }, note.content));\n    })))), React.createElement(\"div\", {\n      id: \"upload_div\",\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456\n      },\n      __self: this\n    }, React.createElement(Input, {\n      id: \"input_title\",\n      placeholder: \"input with title \",\n      allowClear: true,\n      onChange: onChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459\n      },\n      __self: this\n    }), React.createElement(TextArea, {\n      id: \"input_content\",\n      rows: \"20\",\n      cols: \"20\",\n      placeholder: \"textarea with clear icon\",\n      allowClear: true,\n      onChange: onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"primary\",\n      onClick: () => {\n        this.Func_doUpload(document.getElementById(\"input_title\").value, document.getElementById(\"input_content\").value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461\n      },\n      __self: this\n    }, \"Click to Upload!\")), React.createElement(\"div\", {\n      id: \"edit_div\",\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466\n      },\n      __self: this\n    }, React.createElement(Search, {\n      id: \"search_accord_title\",\n      placeholder: \"input title\",\n      enterButton: \"Search\",\n      size: \"large\",\n      onSearch: value => this.Func_doSearch(value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476\n      },\n      __self: this\n    }), React.createElement(Input, {\n      id: \"edit_title\",\n      placeholder: \"Your original title will be put here \",\n      allowClear: true,\n      onChange: onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479\n      },\n      __self: this\n    }), React.createElement(TextArea, {\n      id: \"edit_content\",\n      rows: \"20\",\n      cols: \"20\",\n      placeholder: \"Your original content will be put here\",\n      allowClear: true,\n      onChange: onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"primary\",\n      loading: this.state.loading,\n      onClick: () => {\n        this.Func_doEdit(document.getElementById(\"edit_title\").value, document.getElementById(\"edit_content\").value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481\n      },\n      __self: this\n    }, \"Click to Edit!\")), React.createElement(\"div\", {\n      id: \"search_input\",\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485\n      },\n      __self: this\n    }, React.createElement(Search, {\n      id: \"search_content\",\n      placeholder: \"input search address\",\n      enterButton: \"Search\",\n      size: \"large\",\n      onSearch: value => this.Func_SearchOtherNote(value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486\n      },\n      __self: this\n    })), React.createElement(Breadcrumb, {\n      style: {\n        margin: '20px 0'\n      },\n      id: \"show_other_notes\",\n      style: {\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: \"other_navigation\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497\n      },\n      __self: this\n    }), React.createElement(Collapse, {\n      accordion: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498\n      },\n      __self: this\n    }, this.other_notes[\"items\"].map(other_note => {\n      return React.createElement(Panel, {\n        header: other_note.title,\n        key: other_note.idx,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 501\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 502\n        },\n        __self: this\n      }, other_note.content));\n    })))))), React.createElement(Footer, {\n      id: \"footer\",\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512\n      },\n      __self: this\n    }, \"Designed By Martin & Nop\")));\n  }\n\n}\n\nexport default SiderDemo;","map":{"version":3,"sources":["/home/leixiao/DAPP/src/Navi/Navi.js"],"names":["Layout","Menu","Breadcrumb","Icon","React","Component","Button","Input","Collapse","Web3","web3","window","Header","Content","Footer","Sider","TextArea","Search","Panel","SubMenu","onChange","e","console","log","CONTRACT","SiderDemo","state","collapsed","mode","loading","iconLoading","showstate","content","account","notes","length","idx","items","other_notes","edit_idx","GetLength","my","payload","eth","abi","encodeFunctionCall","name","type","inputs","res","call","to","data","decodeParameter","error","message","WriteNote","funcSig","encodeFunctionSignature","param","encodeParameters","defaultAccount","sendTransaction","slice","gas","alert","ModifyNote","Read","setState","i","push","substr","indexOf","toString","changeShowState2true","toggle","enterLoading","enterIconLoading","nno","setAccount","Func_MyNotes","displayAndHiddenBtn","Func_NewNote","Func_FindNote","EmptyOtherNotes","Func_SearchOtherNote","document","getElementById","innerText","Func_EditNote","Func_doUpload","title","tmp","location","reload","Func_doSearch","find","value","Func_doEdit","btnId","currentBtn","style","display","height","body","componentWillMount","addEventListener","ethereum","enable","getAccounts","err","accounts","providers","HttpProvider","wallet","add","render","background","padding","color","paddingLeft","fontSize","cursor","float","paddingRight","logo","margin","minHeight","clientHeight","map","note","other_note","textAlign"],"mappings":"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","sourcesContent":["import { Layout, Menu, Breadcrumb, Icon } from 'antd';\nimport React, { Component } from 'react';\nimport 'antd/dist/antd.css';\nimport logo from '../logo.svg';\nimport './Navi.css';\nimport { Button } from 'antd';\nimport { Input } from 'antd';\nimport { Collapse } from 'antd';\nimport Web3 from \"web3\";\n\n\n\nlet web3 = window.web3;\nconst { Header, Content, Footer, Sider } = Layout;\nconst { TextArea,Search } = Input;\nconst { Panel } = Collapse;\nconst { SubMenu } = Menu;\n// For test\nconst onChange = e => {\n    console.log(e);\n};\nconst CONTRACT = \"0xD1D8494820A809F94Def324FEF631Ca2bBB37345\";\n\n\nclass SiderDemo extends Component {\n\n    state = {\n        collapsed: false,\n        mode: 'inline',\n        loading: false,\n        iconLoading: false,\n        showstate: false,\n        content: \"\",\n        account:\"\",\n    };\n\n    // For the author \n    notes = {\n        length:0,\n        idx:0,\n        items:[]\n        // The notes' contents\n        // Format:\n        // {content : \"content\" , idx: \"123\", title: \"title\"}\n    }\n    \n    // For searching others' notes\n    other_notes = {\n        length:0,\n        idx:0,\n        items:[]\n        // The notes' contents\n        // Format:\n        // {content : \"content\" , idx: \"123\", title: \"title\"}\n    }\n\n    edit_idx = -1;\n\n    // Get account from metamask or set by default\n    componentWillMount() {\n        window.addEventListener(\"load\", async () => {\n          if (window.ethereum) {\n            // console.log(\"init metamask\", window.ethereum);\n            web3 = new Web3(window.ethereum);\n            await window.ethereum.enable();\n            await web3.eth.getAccounts(function(err, accounts) {\n            web3.eth.defaultAccount = accounts[0];\n            });\n          } else {\n            console.log(\"inject sdk\");\n            web3 = new Web3(\n              new Web3.providers.HttpProvider(\"http://localhost:7545\")\n            );\n            // 添加Ganache第一个账户的私钥\n            web3.eth.accounts.wallet.add(\n              \"0x9d3908699ff0fff75d409fc5bac0ea322cc6287c47299959ee291aef6cfe67a4\"\n            );\n            \n            web3.eth.defaultAccount = \"0x819De97b7B694941D4F82a9C9B4af544109407F9\";\n           }\n            // Get the number of notes at the very beginning, use the \"await\" to make sure that read can be successful after get the right length\n            await this.GetLength(web3.eth.defaultAccount,1);\n            // Read all notes for displaying\n            this.Read(web3.eth.defaultAccount,1);\n        });\n      }\n\n    // Call the smart contract to get the number of notes in total\n    GetLength = async (account,my) => {\n        // Call the function Length in smart contract\n        try{\n            const payload = web3.eth.abi.encodeFunctionCall(\n                {\n                  name: \"Length\",\n                  type: \"function\",\n                  inputs: [{\n                      type: 'address',\n                      name: '_address'\n                  }]\n                },\n                [account]\n            );\n    \n            const res = await web3.eth.call({\n                to: CONTRACT,\n                data: payload\n            });\n            \n            // Argument \"my\" is used to decide change the \"length\" of the account owner or others\n            if(my == 1){\n                this.notes[\"length\"] = web3.eth.abi.decodeParameter(\"uint256\", res);\n            }\n            else{\n                this.other_notes[\"length\"] = web3.eth.abi.decodeParameter(\"uint256\", res);\n            }\n        }\n        catch(e)\n        {\n            // If there is error, same as below\n            console.error(e.message);\n        }\n            \n    };\n\n    // Call the smart contract to write the note\n    WriteNote = async (content) => {\n        // Call the function Write in smart contract\n        const funcSig = web3.eth.abi.encodeFunctionSignature(\"Write(address,string)\");\n        const param = web3.eth.abi.encodeParameters(['address','string'],[web3.eth.defaultAccount,content]);\n        try {\n            await web3.eth.sendTransaction({\n              to: CONTRACT, \n              data: funcSig + param.slice(2),\n              gas: 2000000\n            });\n            alert(\"Write done.\");\n          } catch (e) {\n            console.error(e.message);\n          } finally {\n            // Update the length in state after writing down (maybe fail, thus length won't change)\n            this.GetLength(web3.eth.defaultAccount,this.notes); \n          }  \n    };\n\n    // Call the smart contract to modify the note\n    ModifyNote = async (content) => {\n        // Call the funcion Modify in smart contract\n        const funcSig = web3.eth.abi.encodeFunctionSignature(\"Modify(address,uint256,string)\");\n        const param = web3.eth.abi.encodeParameters(['address','uint256','string'],[web3.eth.defaultAccount,this.edit_idx,content]);\n        try {\n            await web3.eth.sendTransaction({\n              to: CONTRACT, \n              data: funcSig + param.slice(2),\n              gas: 2000000\n            });\n            alert(\"Modify done.\");\n          } catch (e) {\n            console.error(e.message);\n          } finally {\n            // Update the length\n            this.GetLength(web3.eth.defaultAccount,this.notes); \n          }  \n    }\n\n    // Call the smart contract to read all the notes\n    Read = async (account,my) => {\n        this.setState({\n            loading: true\n        }); \n        var i=0;\n        var length = 0;\n        // The function of argument \"my\" is same as mentioned before\n        // Note that has been read before won't be read twice (unless fresh or change the page)\n        if(my == 1){\n            i = this.notes[\"idx\"]; \n            length = this.notes[\"length\"];\n        }\n        else{\n            i = this.other_notes[\"idx\"]; \n            length = this.other_notes[\"length\"];\n        }\n        try{\n            for(;i<length;i++){\n                // Call the function Read in smart contract\n                const payload = web3.eth.abi.encodeFunctionCall(\n                    {\n                      name: \"Read\",\n                      type: \"function\",\n                      inputs: [{\n                          type: 'address',\n                          name: '_address',\n                      },{\n                          type: 'uint256',\n                          name: 'index',\n                      }]\n                    },\n                    [account,i]\n                );\n                const res = await web3.eth.call({\n                    to: CONTRACT,\n                    data: payload\n                });\n                this.setState({\n                    content: web3.eth.abi.decodeParameter(\"string\", res),\n                    // idx:i+1\n                });  \n                // Same as above\n                if(my == 1){\n                    this.notes[\"idx\"] = i+1; \n                    this.notes[\"items\"].push({'content': this.state.content.substr(this.state.content.indexOf(\"\\n\\n\")+2),'idx': i.toString(), 'title': this.state.content.substr(0,this.state.content.indexOf(\"\\n\\n\"))})\n                }\n                else{\n                    this.other_notes[\"idx\"] = i+1; \n                    this.other_notes[\"items\"].push({'content': this.state.content.substr(this.state.content.indexOf(\"\\n\\n\")+2),'idx': i.toString(), 'title': this.state.content.substr(0,this.state.content.indexOf(\"\\n\\n\"))})\n                }\n                // Update the page after read successfully\n                this.changeShowState2true();\n            }                  \n        }\n        catch(e)\n        {\n            console.error(e.message);\n        }\n        finally\n        {\n            this.setState({\n                loading: false\n            }); \n        }\n           \n    };\n\n    // The page style control\n    toggle = () => {\n        this.setState({\n            collapsed: !this.state.collapsed,\n        });\n    }\n\n    enterLoading = () => {\n        this.setState({ loading: true });\n    };\n\n    enterIconLoading = () => {\n        this.setState({ iconLoading: true });\n    };\n\n    enterIconLoading = () => {\n        this.setState({ nno: true });\n    };\n\n    setAccount = (account) => {\n        this.setState({account: account});\n        // web3.eth.defaultAccount = this.state.account;\n    };\n\n    changeShowState2true() {\n        this.setState((state) => {\n          return {showstate: true}\n        });\n      }\n    // Those Func_MyNotes, Func_NewNote, Func_FindNote, Func_SearchOtherNote are all binded to click button for page switching\n    Func_MyNotes = () => {\n        if(this.state.loading == true) return;\n        this.displayAndHiddenBtn(\"shownotes\",\"d\");\n        this.displayAndHiddenBtn(\"upload_div\",\"h\");\n        this.displayAndHiddenBtn(\"search_input\",\"h\");\n        this.displayAndHiddenBtn(\"show_other_notes\",\"h\");\n        this.displayAndHiddenBtn(\"edit_div\", \"h\");\n    };\n    Func_NewNote = () => {\n        if(this.state.loading == true) return;\n        this.displayAndHiddenBtn(\"shownotes\",\"h\");\n        this.displayAndHiddenBtn(\"upload_div\",\"d\");\n        this.displayAndHiddenBtn(\"search_input\",\"h\");\n        this.displayAndHiddenBtn(\"show_other_notes\",\"h\");\n        this.displayAndHiddenBtn(\"edit_div\", \"h\");\n    };\n    Func_FindNote = () => {\n        if(this.state.loading == true) return;\n        this.displayAndHiddenBtn(\"shownotes\",\"h\");\n        this.displayAndHiddenBtn(\"upload_div\",\"h\");\n        this.displayAndHiddenBtn(\"search_input\",\"d\");\n        this.displayAndHiddenBtn(\"show_other_notes\",\"h\");\n        this.displayAndHiddenBtn(\"edit_div\", \"h\");\n    };\n\n    EmptyOtherNotes = () => {\n        this.other_notes[\"length\"] = 0;\n        this.other_notes[\"idx\"] = 0;\n        this.other_notes[\"items\"] = [];\n    }\n\n    Func_SearchOtherNote = async (account) => {\n        try {\n            this.EmptyOtherNotes();\n            await this.GetLength(account,0);\n            this.Read(account,0);\n            this.displayAndHiddenBtn(\"shownotes\",\"h\");\n            this.displayAndHiddenBtn(\"upload_div\",\"h\");\n            this.displayAndHiddenBtn(\"search_input\",\"d\");\n            this.displayAndHiddenBtn(\"show_other_notes\",\"d\");\n            this.displayAndHiddenBtn(\"edit_div\", \"h\");\n            document.getElementById(\"other_navigation\").innerText = \"Results:\";\n          } catch (e) {\n            console.error(e.message);\n            alert(\"Not found\");\n          } finally {\n            this.setState({\n              loading: false\n            });\n          }\n    }\n\n    Func_EditNote = () => {\n        if(this.state.loading == true) return;\n        this.displayAndHiddenBtn(\"shownotes\",\"h\");\n        this.displayAndHiddenBtn(\"upload_div\",\"h\");\n        this.displayAndHiddenBtn(\"search_input\",\"h\");\n        this.displayAndHiddenBtn(\"show_other_notes\",\"h\");\n        this.displayAndHiddenBtn(\"edit_div\", \"d\");\n    }\n\n    // Those Func_doUpload, Func_doSearch, Func_doEdit are all binded to click button for calling the function in smart contract\n    Func_doUpload = async (title,content) => {\n        var tmp;\n        tmp = title+\"\\n\\n\"+content;\n        await this.WriteNote(tmp);\n        window.location.reload(true); \n    };\n\n    Func_doSearch = (title) => {\n        var i=0;\n        var content, title;\n        var find = 0;\n        for(i=0;i<this.notes[\"length\"];++i){\n            if(this.notes[\"items\"][i][\"title\"] === title){\n                content = this.notes[\"items\"][i][\"content\"];\n                title = this.notes[\"items\"][i][\"title\"];\n                document.getElementById(\"edit_content\").value = content;\n                document.getElementById(\"edit_title\").value = title;\n                this.edit_idx = i;\n                find = 1;\n                break;\n            }\n        }\n\n        if(find == 0)\n        {\n            alert(\"Not found\");\n        }\n    };\n\n    Func_doEdit = async (title, content) => {\n        if(this.edit_idx == -1)\n        {\n            alert(\"Modify error, you must get the note you want to modify first!\");\n            return;\n        }\n        var tmp;\n        tmp = title+\"\\n\\n\"+content;\n        await this.ModifyNote(tmp);\n        this.edit_idx = -1;\n        window.location.reload(true); \n    }\n\n    // For page switching\n    displayAndHiddenBtn = (btnId, type)=> {\n        var currentBtn = document.getElementById(btnId);\n        if (type == \"d\") {\n                currentBtn.style.display = \"block\"; //style中的display属性\n            }\n        else if (type == \"h\") {\n                currentBtn.style.display = \"none\";\n            }\n        // add by me\n        document.getElementById(\"main_div\").style.height = document.body.height - document.getElementById(\"footer\").style.height;\n        }\n    \n    render() {\n        const { name } = this.state;\n        return (\n            <Layout>\n                <Sider\n                    trigger={null}\n                    collapsible\n                    collapsed={this.state.collapsed}\n                >\n            \n                    <div className=\"logo\" >\n                        <span className=\"nav-text\"  ></span>\n                    </div>\n                    <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={['1']}>\n                        <Menu.Item key=\"1\" onClick={() => {this.Func_MyNotes()}}>\n                            <Icon type=\"user\" />\n                            <span className=\"nav-text\" >My Notes</span>\n                        </Menu.Item>\n                        <SubMenu\n                            key=\"sub1\"\n                            title={\n                            <span>\n                                <Icon type=\"mail\" />\n                                <span>New / Edit</span>\n                            </span>\n                            }\n                        >\n                        <Menu.Item key=\"2\" onClick={() => {this.Func_NewNote()}}>\n                            <Icon type=\"upload\" />\n                            <span className=\"nav-text\" >New note</span>\n                        </Menu.Item>\n                        <Menu.Item key=\"3\" onClick={() => {this.Func_EditNote()}}>\n                            <Icon type=\"upload\" />\n                            <span className=\"nav-text\" >Edit note</span>\n                        </Menu.Item>\n                        </SubMenu>\n                        <Menu.Item key=\"4\" onClick={() => {this.Func_FindNote()}}>\n                            <Icon type=\"right-circle\" />\n                            <span className=\"nav-text\"  >Find notes</span>\n                        </Menu.Item>\n                        \n                    </Menu>\n                </Sider>\n                <Layout>\n                    <Header style={{ background: '#000', padding: 0 }}>\n                        <span style={{ color: '#fff', paddingLeft: '2%', fontSize: '1.4em' }}>\n                            <Icon\n                                className=\"trigger\"\n                                type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'}\n                                onClick={this.toggle}\n                                style={{ cursor: 'pointer' }}\n                            />\n                        </span>\n                        <span style={{ color: '#fff', paddingLeft: '2%', fontSize: '1.4em' }}>Dapp Note</span>\n                        <span style={{ color: '#fff', float: 'right', paddingRight: '1%' }}>\n                            <img src={logo} className=\"App-logo\" alt=\"logo\" />\n                        </span>\n                    </Header>\n                    \n                    \n                    <Content style={{ margin: '0 160px' }} >\n                    <div id = \"main_div\" style={{ padding: 24, background: '', minHeight: document.body.clientHeight }}>\n                        <Breadcrumb style={{ margin: '20px 0' }}>\n                            <div id=\"shownotes\" style={{display:'block'}}>\n                            <p id = \"my_navigation\">My Notes:</p>\n                            <Collapse accordion >\n                                    {this.notes[\"items\"].map((note) => {\n                                    return (\n                                        <Panel header={note.title} key={note.idx}>\n                                            <p>{note.content}</p>\n                                        </Panel>\n                                    )\n                                    })}\n                            </Collapse>\n                            </div>\n                        </Breadcrumb>           \n                        <div id = \"upload_div\" style={{display:'none'}}>\n                                <Input  id = \"input_title\" placeholder=\"input with title \" allowClear onChange={onChange} required/>\n                                <br />\n                                <br />\n                                <TextArea id = \"input_content\" rows=\"20\" cols=\"20\" placeholder=\"textarea with clear icon\" allowClear onChange={onChange} />\n                                <Button  type=\"primary\"  onClick={() => {this.Func_doUpload(document.getElementById(\"input_title\").value,document.getElementById(\"input_content\").value)}} >\n                                    Click to Upload!\n                                </Button>\n                        </div>\n                        <div id = \"edit_div\" style={{display:'none'}}>\n                            <div >\n                                    <Search\n                                        id = \"search_accord_title\"\n                                        placeholder=\"input title\"\n                                        enterButton=\"Search\"\n                                        size=\"large\"\n                                        onSearch={value => this.Func_doSearch(value)}\n                                    />\n                            </div>\n                            <br />\n                            <br />\n                            <Input  id = \"edit_title\" placeholder=\"Your original title will be put here \" allowClear onChange={onChange}/>\n                            <br />\n                            <br />\n                            <TextArea id = \"edit_content\" rows=\"20\" cols=\"20\" placeholder=\"Your original content will be put here\" allowClear onChange={onChange} />\n                            <Button  type=\"primary\" loading={this.state.loading} onClick={() => {this.Func_doEdit(document.getElementById(\"edit_title\").value,document.getElementById(\"edit_content\").value)}}>\n                                Click to Edit!\n                            </Button>\n                        </div>\n                        <div id = \"search_input\" style={{display:'none'}}>\n                                <Search\n                                    id = \"search_content\"\n                                    placeholder=\"input search address\"\n                                    enterButton=\"Search\"\n                                    size=\"large\"\n                                    onSearch={value => this.Func_SearchOtherNote(value)}\n                                />\n                        </div>\n                        <Breadcrumb style={{ margin: '20px 0' }} id=\"show_other_notes\" style={{display:'none'}}>\n                            <div >\n                                <br />\n                                <p id = \"other_navigation\"></p>\n                            <Collapse accordion >\n                                    {this.other_notes[\"items\"].map((other_note) => {\n                                    return (\n                                        <Panel header={other_note.title} key={other_note.idx}>\n                                            <p>{other_note.content}</p>\n                                        </Panel>\n                                    )\n                                    })}\n                                </Collapse>\n                            </div>\n                        </Breadcrumb>    \n                        </div>\n                    </Content>\n                   \n                    <Footer id = \"footer\" style={{ textAlign: 'center' }}>\n                        Designed By Martin & Nop\n                    </Footer>\n                </Layout>\n            </Layout>\n        );\n    }\n}\n\nexport default SiderDemo;"]},"metadata":{},"sourceType":"module"}